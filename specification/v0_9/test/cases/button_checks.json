{
  "schema": "server_to_client.json",
  "tests": [
    {
      "description": "Button with nested valid checks",
      "valid": true,
      "data": {
        "updateComponents": {
          "surfaceId": "test_surface",
          "components": [
            {
              "id": "btn1",
              "component": "Button",
              "child": "txt1",
              "action": { "name": "submit" },
              "checks": [
                {
                  "and": [
                    {
                      "call": "required",
                      "args": { "value": { "path": "/formData/terms" } },
                      "returnType": "boolean"
                    },
                    {
                      "or": [
                        {
                          "call": "required",
                          "args": { "value": { "path": "/formData/email" } },
                          "returnType": "boolean"
                        },
                        {
                          "call": "required",
                          "args": { "value": { "path": "/formData/phone" } },
                          "returnType": "boolean"
                        }
                      ]
                    }
                  ],
                  "message": "Must accept terms and provide contact info"
                }
              ]
            },
            { "id": "txt1", "component": "Text", "text": "Submit" }
          ]
        }
      }
    },
    {
      "description": "Button with deprecated enabled property (should fail)",
      "valid": false,
      "data": {
        "updateComponents": {
          "surfaceId": "test_surface",
          "components": [
            {
              "id": "btn2",
              "component": "Button",
              "child": "txt2",
              "action": { "name": "submit" },
              "enabled": { "path": "/some/path" }
            },
            { "id": "txt2", "component": "Text", "text": "Submit" }
          ]
        }
      }
    },
    {
      "description": "Button with invalid check structure (invalid returnType)",
      "valid": false,
      "data": {
        "updateComponents": {
          "surfaceId": "test_surface",
          "components": [
            {
              "id": "btn3",
              "component": "Button",
              "child": "txt3",
              "action": { "name": "submit" },
              "checks": [
                {
                  "call": "required",
                  "args": { "value": "foo" },
                  "returnType": "not_a_valid_type"
                }
              ]
            },
            { "id": "txt3", "component": "Text", "text": "Submit" }
          ]
        }
      }
    },
    {
      "description": "Button with invalid nested structure (extra property)",
      "valid": false,
      "data": {
        "updateComponents": {
          "surfaceId": "test_surface",
          "components": [
            {
              "id": "btn4",
              "component": "Button",
              "child": "txt4",
              "action": { "name": "submit" },
              "checks": [
                {
                  "and": [],
                  "message": "foo",
                  "extraProp": "not allowed"
                }
              ]
            },
            { "id": "txt4", "component": "Text", "text": "Submit" }
          ]
        }
      }
    }
  ]
}
